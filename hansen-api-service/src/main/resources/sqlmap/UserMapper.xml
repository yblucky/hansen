<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mappers.UserMapper">

	<sql id="fields">
		uid,unionId,phone,loginName,email,nickName,sex,salt,headImgUrl,loginTime,openId,payWord,password,firstReferrer,secondReferrer,grade,cardGrade,remainTaskNo,createType ,
		releaseTime,equityAmt,payAmt,tradeAmt,maxProfits,sumProfits,cashOutProfits,contactUserId,activeCodeNo,registerCodeNo,createTime,updateTime,status,remark,insuranceAmt
	</sql>

	<sql id="fields_id">
		id,<include refid="fields"/>
	</sql>

	<sql id="table_name">base_user</sql>

	<sql id="selector">
		select <include refid="fields_id"/> from <include refid="table_name"/>
	</sql>

	<sql id="condition">
		<where>
			<if test="model.createType != null">createType=#{model.createType}</if>
			<if test="model.remainTaskNo != null">remainTaskNo=#{model.remainTaskNo}</if>
			<if test="model.uid != null">uid=#{model.uid}</if>
			<if test="model.unionId != null and model.unionId != ''">and unionId=#{model.unionId}</if>
			<if test="model.phone != null and model.phone != ''">and phone=#{model.phone}</if>
			<if test="model.loginName != null and model.loginName != ''">and loginName=#{model.loginName}</if>
			<if test="model.email != null and model.email != ''">and email=#{model.email}</if>
			<if test="model.amount != null">and amount=#{model.amount}</if>
			<if test="model.nickName != null and model.nickName != ''">and nickName=#{model.nickName}</if>
			<if test="model.sex != null">and sex=#{model.sex}</if>
			<if test="model.salt != null and model.salt != ''">and salt=#{model.salt}</if>
			<if test="model.headImgUrl != null and model.headImgUrl != ''">and headImgUrl=#{model.headImgUrl}</if>
			<if test="model.loginTime != null">and loginTime=#{model.loginTime}</if>
			<if test="model.openId != null and model.openId != ''">and openId=#{model.openId}</if>
			<if test="model.payWord != null and model.payWord != ''">and payWord=#{model.payWord}</if>
			<if test="model.password != null and model.password != ''">and password=#{model.password}</if>
			<if test="model.firstReferrer != null and model.firstReferrer != ''">and firstReferrer=#{model.firstReferrer}</if>
			<if test="model.secondReferrer != null and model.secondReferrer != ''">and secondReferrer=#{model.secondReferrer}</if>
			<if test="model.grade != null">and grade=#{model.grade}</if>
			<if test="model.cardLevel != null">and cardLevel=#{model.cardLevel}</if>
			<if test="model.releaseTime != null and model.releaseTime != ''">and releaseTime=#{model.releaseTime}</if>
			<if test="model.equityAmt != null">and equityAmt=#{model.equityAmt}</if>
			<if test="model.payAmt != null">and payAmt=#{model.payAmt}</if>
			<if test="model.tradeAmt != null">and tradeAmt=#{model.tradeAmt}</if>
			<if test="model.maxProfits != null">and maxProfits=#{model.maxProfits}</if>
			<if test="model.sumProfits != null">and sumProfits=#{model.sumProfits}</if>
			<if test="model.cashOutProfits != null">and cashOutProfits=#{model.cashOutProfits}</if>
			<if test="model.contactUserId != null and model.contactUserId != ''">and contactUserId=#{model.contactUserId}</if>
			<if test="model.activeCodeNo != null">and activeCodeNo=#{model.activeCodeNo}</if>
			<if test="model.registerCodeNo != null">and registerCodeNo=#{model.registerCodeNo}</if>
			<if test="model.status != null">and status=#{model.status}</if>
			<if test="model.remark != null and model.remark != ''">and remark=#{model.remark}</if>
			<if test="model.insuranceAmt != null and model.insuranceAmt != ''">and insuranceAmt=#{model.insuranceAmt}</if>
		</where>
	</sql>

	<insert id="create" useGeneratedKeys="true" keyProperty="id">
		insert into <include refid="table_name"/>(
		<trim  suffixOverrides="," >
			<if test="model.id!= null  and model.id!=''">
				id,
			</if>
			<if test="model.uid!= null  and model.uid!=''">
				uid,
			</if>
			<if test="model.unionId!= null  and model.unionId!=''">
				unionId,
			</if>
			<if test="model.phone!= null  and model.phone!=''">
				phone,
			</if>
			<if test="model.loginName!= null  and model.loginName!=''">
				loginName,
			</if>
			<if test="model.email!= null  and model.email!=''">
				email,
			</if>
			<if test="model.amount!= null  and model.amount!=''">
				amount,
			</if>
			<if test="model.nickName!= null  and model.nickName!=''">
				nickName,
			</if>
			<if test="model.sex!= null  and model.sex!=''">
				sex,
			</if>
			<if test="model.salt!= null  and model.salt!=''">
				salt,
			</if>
			<if test="model.headImgUrl!= null  and model.headImgUrl!=''">
				headImgUrl,
			</if>
			<if test="model.loginTime!= null  and model.loginTime!=''">
				loginTime,
			</if>
			<if test="model.openId!= null  and model.openId!=''">
				openId,
			</if>
			<if test="model.payWord!= null  and model.payWord!=''">
				payWord,
			</if>
			<if test="model.password!= null  and model.password!=''">
				password,
			</if>
			<if test="model.firstReferrer!= null  and model.firstReferrer!=''">
				firstReferrer,
			</if>
			<if test="model.secondReferrer!= null  and model.secondReferrer!=''">
				secondReferrer,
			</if>
			<if test="model.createType!= null  and model.createType!=''">
				createType,
			</if>
			<if test="model.remainTaskNo!= null  and model.remainTaskNo!=''">
				remainTaskNo,
			</if>
			<if test="model.grade!= null  and model.grade!=''">
				grade,
			</if>
			<if test="model.cardLevel!= null  and model.cardLevel!=''">
				cardLevel,
			</if>
			<if test="model.releaseTime!= null  and model.releaseTime!=''">
				releaseTime,
			</if>
			<if test="model.equityAmt!= null  and model.equityAmt!=''">
				equityAmt,
			</if>
			<if test="model.payAmt!= null  and model.payAmt!=''">
				payAmt,
			</if>
			<if test="model.tradeAmt!= null  and model.tradeAmt!=''">
				tradeAmt,
			</if>
			<if test="model.insuranceAmt!= null  and model.insuranceAmt!=''">
				insuranceAmt,
			</if>
			<if test="model.maxProfits!= null  and model.maxProfits!=''">
				maxProfits,
			</if>
			<if test="model.sumProfits!= null  and model.sumProfits!=''">
				sumProfits,
			</if>
			<if test="model.cashOutProfits!= null  and model.cashOutProfits!=''">
				cashOutProfits,
			</if>
			<if test="model.contactUserId!= null  and model.contactUserId!=''">
				contactUserId,
			</if>
			<if test="model.activeCodeNo!= null  and model.activeCodeNo!=''">
				activeCodeNo,
			</if>
			<if test="model.registerCodeNo!= null  and model.registerCodeNo!=''">
				registerCodeNo,
			</if>
			<if test="model.createTime!= null  and model.createTime!=''">
				createTime,
			</if>
			<if test="model.updateTime!= null  and model.updateTime!=''">
				updateTime,
			</if>
			<if test="model.status!= null  and model.status!=''">
				status,
			</if>
			<if test="model.remark!= null  and model.remark!=''">
				remark,
			</if>
		</trim>
		)
		values(
		<trim  suffixOverrides="," >

			<if test="model.id!= null  and model.id!=''">
				#{model.id},
			</if>
			<if test="model.uid!= null  and model.uid!=''">
				#{model.uid},
			</if>
			<if test="model.unionId!= null  and model.unionId!=''">
				#{model.unionId},
			</if>
			<if test="model.phone!= null  and model.phone!=''">
				#{model.phone},
			</if>
			<if test="model.loginName!= null  and model.loginName!=''">
				#{model.loginName},
			</if>
			<if test="model.email!= null  and model.email!=''">
				#{model.email},
			</if>
			<if test="model.amount!= null  and model.amount!=''">
				#{model.amount},
			</if>
			<if test="model.nickName!= null  and model.nickName!=''">
				#{model.nickName},
			</if>
			<if test="model.sex!= null  and model.sex!=''">
				#{model.sex},
			</if>
			<if test="model.salt!= null  and model.salt!=''">
				#{model.salt},
			</if>
			<if test="model.headImgUrl!= null  and model.headImgUrl!=''">
				#{model.headImgUrl},
			</if>
			<if test="model.loginTime!= null  and model.loginTime!=''">
				#{model.loginTime},
			</if>
			<if test="model.openId!= null  and model.openId!=''">
				#{model.openId},
			</if>
			<if test="model.payWord!= null  and model.payWord!=''">
				#{model.payWord},
			</if>
			<if test="model.password!= null  and model.password!=''">
				#{model.password},
			</if>
			<if test="model.firstReferrer!= null  and model.firstReferrer!=''">
				#{model.firstReferrer},
			</if>
			<if test="model.secondReferrer!= null  and model.secondReferrer!=''">
				#{model.secondReferrer},
			</if>
			<if test="model.createType!= null  and model.createType!=''">
				#{model.createType},
			</if>
			<if test="model.remainTaskNo!= null  and model.remainTaskNo!=''">
				#{model.remainTaskNo},
			</if>
			<if test="model.grade!= null  and model.grade!=''">
				#{model.grade},
			</if>
			<if test="model.cardLevel!= null  and model.cardLevel!=''">
				#{model.cardLevel},
			</if>
			<if test="model.releaseTime!= null  and model.releaseTime!=''">
				#{model.releaseTime},
			</if>
			<if test="model.equityAmt!= null  and model.equityAmt!=''">
				#{model.equityAmt},
			</if>
			<if test="model.payAmt!= null  and model.payAmt!=''">
				#{model.payAmt},
			</if>
			<if test="model.tradeAmt!= null  and model.tradeAmt!=''">
				#{model.tradeAmt},
			</if>
			<if test="model.insuranceAmt!= null  and model.insuranceAmt!=''">
				#{model.insuranceAmt},
			</if>
			<if test="model.maxProfits!= null  and model.maxProfits!=''">
				#{model.maxProfits},
			</if>
			<if test="model.sumProfits!= null  and model.sumProfits!=''">
				#{model.sumProfits},
			</if>
			<if test="model.cashOutProfits!= null  and model.cashOutProfits!=''">
				#{model.cashOutProfits},
			</if>
			<if test="model.contactUserId!= null  and model.contactUserId!=''">
				#{model.contactUserId},
			</if>
			<if test="model.activeCodeNo!= null  and model.activeCodeNo!=''">
				#{model.activeCodeNo},
			</if>
			<if test="model.registerCodeNo!= null  and model.registerCodeNo!=''">
				#{model.registerCodeNo},
			</if>
			<if test="model.createTime!= null  and model.createTime!=''">
				#{model.createTime},
			</if>
			<if test="model.updateTime!= null  and model.updateTime!=''">
				#{model.updateTime},
			</if>
			<if test="model.status!= null  and model.status!=''">
				#{model.status},
			</if>
			<if test="model.remark!= null  and model.remark!=''">
				#{model.remark},
			</if>
		</trim>
		);
	</insert>

	<select id="readById" resultType="User">
		<include refid="selector"/> where id=#{id}  limit 1;
	</select>

	<select id="readList" resultType="User">
		<include refid="selector"/> <include refid="condition"/> limit #{startRow}, #{pageSize};
	</select>

	<select id="readOne" resultType="User">
		<include refid="selector"/> <include refid="condition"/> limit 1;
	</select>

	<select id="readCount" resultType="int">
		select count(1) from <include refid="table_name"/> <include refid="condition"/>
	</select>

	<update id="updateById">
		update <include refid="table_name"/>
		<set>
			<if test="model.uid != null">uid= #{model.uid},</if>
			<if test="model.createType != null and model.createType !=''">remainTaskNo= #{model.createType},</if>
			<if test="model.remainTaskNo != null and model.remainTaskNo !=''">remainTaskNo= #{model.remainTaskNo},</if>
			<if test="model.unionId != null and model.unionId !=''">unionId= #{model.unionId},</if>
			<if test="model.phone != null and model.phone !=''">phone= #{model.phone},</if>
			<if test="model.loginName != null and model.loginName !=''">loginName= #{model.loginName},</if>
			<if test="model.email != null and model.email !=''">email= #{model.email},</if>
			<if test="model.amount != null">amount= #{model.amount},</if>
			<if test="model.nickName != null and model.nickName !=''">nickName= #{model.nickName},</if>
			<if test="model.sex != null">sex= #{model.sex},</if>
			<if test="model.salt != null and model.salt !=''">salt= #{model.salt},</if>
			<if test="model.headImgUrl != null and model.headImgUrl !=''">headImgUrl= #{model.headImgUrl},</if>
			<if test="model.loginTime != null">loginTime= #{model.loginTime},</if>
			<if test="model.openId != null and model.openId !=''">openId= #{model.openId},</if>
			<if test="model.payWord != null and model.payWord !=''">payWord= #{model.payWord},</if>
			<if test="model.password != null and model.password !=''">password= #{model.password},</if>
			<if test="model.firstReferrer != null and model.firstReferrer !=''">firstReferrer= #{model.firstReferrer},</if>
			<if test="model.secondReferrer != null and model.secondReferrer !=''">secondReferrer= #{model.secondReferrer},</if>
			<if test="model.grade != null">grade= #{model.grade},</if>
			<if test="model.cardLevel != null">cardLevel= #{model.cardLevel},</if>
			<if test="model.releaseTime != null and model.releaseTime !=''">releaseTime= #{model.releaseTime},</if>
			<if test="model.equityAmt != null">equityAmt= #{model.equityAmt},</if>
			<if test="model.payAmt != null">payAmt= #{model.payAmt},</if>
			<if test="model.tradeAmt != null">tradeAmt= #{model.tradeAmt},</if>
			<if test="model.maxProfits != null">maxProfits= #{model.maxProfits},</if>
			<if test="model.sumProfits != null">sumProfits= #{model.sumProfits},</if>
			<if test="model.cashOutProfits != null">cashOutProfits= #{model.cashOutProfits},</if>
			<if test="model.contactUserId != null and model.contactUserId !=''">contactUserId= #{model.contactUserId},</if>
			<if test="model.activeCodeNo != null">activeCodeNo= #{model.activeCodeNo},</if>
			<if test="model.registerCodeNo != null">registerCodeNo= #{model.registerCodeNo},</if>
			<if test="model.status != null">status= #{model.status},</if>
			<if test="model.remark != null and model.remark !=''">remark= #{model.remark},</if>
			<if test="model.insuranceAmt != null and model.insuranceAmt !=''">insuranceAmt= #{model.insuranceAmt},</if>
			updateTime=now()
		</set>
		where id=#{id}
	</update>

	<update id="deleteById">
		update <include refid="table_name"/> set status = 0,updateTime=now() where id = #{id}
	</update>

	<update id="updateEquityAmtByUserId">
		update <include refid="table_name"/> set equityAmt = equityAmt + #{equityAmt},updateTime=now() where id = #{id} and (equityAmt + #{equityAmt})>0
	</update>

	<update id="updateTradeAmtByUserId">
		update <include refid="table_name"/> set tradeAmt = tradeAmt + #{tradeAmt},updateTime=now() where id = #{id} and (tradeAmt + #{tradeAmt})>=0
	</update>

	<update id="updatePayAmtByUserId">
		update <include refid="table_name"/> set payAmt = payAmt + #{payAmt},updateTime=now() where id = #{id} and (payAmt + #{payAmt})>=0
	</update>

	<update id="updateSumProfitsByUserId">
		update <include refid="table_name"/> set sumProfits = sumProfits + #{sumProfits},updateTime=now() where id = #{id} and (sumProfits + #{sumProfits})>=0
	</update>

	<update id="updateMaxProfitsByUserId">
		update <include refid="table_name"/> set maxProfits = maxProfits + #{maxProfits},updateTime=now() where id = #{id} and (maxProfits + #{maxProfits})>=0
	</update>

	<update id="updateCardGradeByUserId">
		update <include refid="table_name"/> set cardGrade = cardGrade ,updateTime=now() where id = #{id}
	</update>

	<update id="updateUserActiveCode">
		update <include refid="table_name"/> set activeCodeNo = activeCodeNo+#{activeCodeNo} ,updateTime=now() where id = #{id} and (activeCodeNo + #{activeCodeNo})>=0
	</update>

	<update id="updateUserRemainTaskNo">
		update <include refid="table_name"/> set remainTaskNo = remainTaskNo+#{remainTaskNo} ,updateTime=now() where id = #{id} and (remainTaskNo + #{remainTaskNo})>=0
	</update>

	<update id="updateUserStatusByUserId">
		update <include refid="table_name"/> set status = status ,updateTime=now() where id = #{id}
	</update>

	<update id="updateUserCardGradeByUserId">
		update <include refid="table_name"/> set cardGrade = cardGrade ,updateTime=now() where id = #{id}
	</update>

	<update id="updateUserGradeByUserId">
		update <include refid="table_name"/> set grade = grade ,updateTime=now() where id = #{id}
	</update>
</mapper>



